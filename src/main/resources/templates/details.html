<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Class Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
</head>
<body>
<div class="container mt-5">
    <div class="row bg-info-subtle rounded-2 p-3">
        <h4 class="text-info-emphasis" th:text="${details['Preferred Name']}"></h4>
    </div>

    <div class="row g-2 mt-3">
        <div class="col-5 border border-dark">
            Gorjan's part
        </div>

        <div class="col-7">
            <div class="my-1">
                <h5 class="mt-2">Details for:</h5>
                <a class="fw-bolder text-info-emphasis text-decoration-none"
                   target="_blank" th:text="${uri}" th:href="${uri}"></a>
            </div>

            <table class="table table-bordered table-striped table-sm">
                <thead>
                <tr>
                    <th>Property</th>
                    <th>Value</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="entry : ${details.entrySet()}">
                    <!-- Property name -->
                    <td th:text="${entry.key}"></td>

                    <!-- Property value logic -->
                    <td>
                        <!-- Superclass Chain -->
                        <div th:if="${entry.key == 'Superclass Chain'}">
            <span th:each="pair, stat : ${#strings.arraySplit(entry.value, ';')}"
                  th:with="label=${pair.substring(0, pair.indexOf('|'))},
                           superclassUri=${pair.substring(pair.indexOf('|') + 1)}">
                <a th:href="@{/details(uri=${superclassUri})}" th:text="${label}"
                   class="text-decoration-none fw-semibold text-primary"></a>
                <span th:if="${!stat.last}"> → </span>
            </span>
                        </div>

                        <!-- Synonyms -->
                        <div th:if="${entry.key == 'Synonyms'}">
                            <span th:if="${entry.value.contains('There are no')}" th:text="${entry.value}" class="fst-italic"></span>
                            <span th:if="${!entry.value.contains('There are no')}"
                                  th:each="syn : ${#strings.arraySplit(entry.value, ';')}"
                                  th:text="${syn.trim()}" class="me-2 badge text-bg-light"></span>
                        </div>

                        <!-- Alternative Labels -->
                        <div th:if="${entry.key == 'Alternative Label'}">
                            <span th:if="${entry.value.contains('There are no')}" th:text="${entry.value}" class="fst-italic"></span>
                            <span th:if="${!entry.value.contains('There are no')}"
                                  th:each="alt : ${#strings.arraySplit(entry.value, ';')}"
                                  th:text="${alt.trim()}" class="me-2 text-success fw-semibold"></span>
                        </div>

                        <!-- Notation -->
                        <div th:if="${entry.key == 'Notation'}">
                            <span class="badge bg-secondary" th:text="${entry.value}"></span>
                        </div>

                        <!-- General clickable label|uri pair -->
                        <div th:if="${entry.value.contains('|')
                     && entry.key != 'Synonyms'
                     && entry.key != 'Superclass Chain'}"
                             th:with="label=${entry.value.substring(0, entry.value.indexOf('|'))},
                      uriLink=${entry.value.substring(entry.value.indexOf('|') + 1)}">
                            <a th:href="@{/details(uri=${uriLink})}" th:text="${label}"
                               class="text-decoration-none fw-medium btn btn-outline-primary me-2"></a>
                        </div>

                        <!-- Fallback plain value -->
                        <div th:if="${!entry.value.contains('|')
                     && entry.key != 'Synonyms'
                     && entry.key != 'Alternative Label'
                     && entry.key != 'Superclass Chain'
                     && entry.key != 'Notation'}"
                             th:text="${entry.value}"></div>
                    </td>
                </tr>
                </tbody>
            </table>

            <a th:href="@{/}" class="btn btn-outline-secondary mt-3">← Back to Search</a>
        </div>
    </div>
</div>
</body>
</html>